@model MWear.Models.Category
@{
    Layout = null;
    List<MWear.Models.WebImage> sliders = ViewBag.WebImages;
    List<MWear.Models.Product> products = ViewBag.Products;
    List<MWear.Models.Category> categories = ViewBag.Categories;
    List<MWear.Models.Color> colors = ViewBag.Colors;
    List<MWear.Models.Size> sizes = ViewBag.Sizes;
    List<MWear.Models.ProductCategory> pcategory = ViewBag.productCategory;
    List<MWear.Models.AvailabeColor> pcolor = ViewBag.productColor;
    List<MWear.Models.AvailableSize> psize = ViewBag.productSize;
}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>MWear - Ecommerce HTML Template.</title>
    <meta name="keywords" content="mwear" />
    <meta name="description" content="Online Store In Pakisatn.">
    <meta name="author" content="Dawood Chouhan">

    <!-- site Favicon -->
    <link rel="icon" href="~/Theme/assets/images/favicon/favicon.png" sizes="32x32" />
    <link rel="apple-touch-icon" href="~/Theme/assets/images/favicon/favicon.png" />
    <meta name="msapplication-TileImage" content="assets/images/favicon/favicon.png" />

    <!-- css Icon Font -->
    <link rel="stylesheet" href="~/Theme/assets/css/vendor/ecicons.min.css" />

    <!-- css All Plugins Files -->
    <link rel="stylesheet" href="~/Theme/assets/css/plugins/animate.css" />
    <link rel="stylesheet" href="~/Theme/assets/css/plugins/swiper-bundle.min.css" />
    <link rel="stylesheet" href="~/Theme/assets/css/plugins/jquery-ui.min.css" />
    <link rel="stylesheet" href="~/Theme/assets/css/plugins/countdownTimer.css" />
    <link rel="stylesheet" href="~/Theme/assets/css/plugins/slick.min.css" />
    <link rel="stylesheet" href="~/Theme/assets/css/plugins/nouislider.css" />
    <link rel="stylesheet" href="~/Theme/assets/css/plugins/bootstrap.css" />

    <!-- Main Style -->
    <link rel="stylesheet" href="~/Theme/assets/css/style.css" />
    <link rel="stylesheet" href="~/Theme/assets/css/responsive.css" />

    <!-- Background css -->
    <link rel="stylesheet" id="bg-switcher-css" href="~/Theme/assets/css/backgrounds/bg-4.css">

</head>
<body class="shop_page">
    <div id="ec-overlay"><span class="loader_img"></span></div>

    <!-- Header start  -->
    @Html.Partial("HeaderTopBar")

    @Html.Partial("_cart")

    <!-- Ec breadcrumb start -->
    <div class="sticky-header-next-sec  ec-breadcrumb section-space-mb">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="row ec_breadcrumb_inner">
                        <div class="col-md-6 col-sm-12">
                            <h2 class="ec-breadcrumb-title">Shop</h2>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <!-- ec-breadcrumb-list start -->
                            <ul class="ec-breadcrumb-list">
                                <li class="ec-breadcrumb-item"><a href="@Url.Action("Index","Shop")">Home</a></li>
                                <li class="ec-breadcrumb-item active">Shop</li>
                            </ul>
                            <!-- ec-breadcrumb-list end -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Ec breadcrumb end -->
    <!-- Page detail section -->
    @*<section class="ec-bnr-detail margin-bottom-30 section-space-pt">
            <div class="ec-page-detail">
                <div class="container">
                    <div class="ec-main-heading d-none">
                        <h2>Shop <span>Detail</span></h2>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-12">
                            <div class="ec-cat-bnr">
                                <a href="~/Theme/product-left-sidebar.html"><span style="background-image:url(../../Images/Products/1920x630.jpg);"></span></a>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12">
                            <div class="ec-page-description">
                                <h6>The Best deal on top brands</h6>
                                <p class="m-0">
                                    Lorem Ipsum is simply dummy text of the printing and typesetting
                                    industry. Lorem Ipsum has been the industry's standard dummy text ever
                                    since the 1500s. It has survived not only five centuries, but also the
                                    leap into electronic typesetting, remaining essentially unchanged.
                                <p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>*@
    <!-- End detail section -->
    <!-- Ec Shop page -->
    <section class="ec-page-content-bnr section-space-pb">
        <div class="container">
            <div class="row">
                <div class="ec-shop-rightside col-lg-9 col-md-12 order-lg-last order-md-first margin-b-30">
                    <!-- Shop Top Start -->
                    <div class="ec-pro-list-top d-flex">
                        <div class="col-md-6 ec-grid-list">
                            <div class="ec-gl-btn">
                                <!-- <button class="btn btn-grid active"><img src="~/Theme/assets/images/icons/grid.svg"
                                        class="svg_img gl_svg" alt="" /></button>
                                <button class="btn btn-list"><img src="~/Theme/assets/images/icons/list.svg"
                                        class="svg_img gl_svg" alt="" /></button> -->
                            </div>
                        </div>
                        <div class="col-md-6 ec-sort-select">
                            <span class="sort-by">Sort by</span>
                            <div class="ec-select-inner">
                                <select name="ec-select" id="ec-select">
                                    <option selected disabled>Position</option>
                                    <option value="1">Relevance</option>
                                    <option value="2">Name, A to Z</option>
                                    <option value="3">Name, Z to A</option>
                                    <option value="4">Price, low to high</option>
                                    <option value="5">Price, high to low</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- Shop Top End -->
                    <!-- Shop content Start -->
                    <div class="shop-pro-content">
                        <div class="shop-pro-inner">
                            <div class="row">


                                
                                <!-- Custom Tile Starts -->
                                @foreach (var items in products.Where(x => x.Available == true).OrderByDescending(x => x.ProductID).Take(16))
                                {

                                    var catids = pcategory.Where(x => x.Product == items.ProductGUID).ToList();
                                    var catname = "";
                                    var count = 1;
                                    foreach (var itemss in catids)
                                    {
                                        var catename = categories.Where(x => x.CategoryID == itemss.Category).FirstOrDefault().CategoryName;
                                        if (count == 1)
                                        {
                                            catname = catename;
                                        }
                                        else
                                        {
                                            catname = catname + ", " + catename;
                                        }
                                        count = count + 1;
                                    }


                                    var lenght12 = psize.Where(x => x.Product == items.ProductGUID).ToList();
                                    var lenght13 = pcolor.Where(x => x.Product == items.ProductGUID).ToList();

                                    <div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mb-6 pro-gl-content">
                                        <!-- START single card -->
                                        <div class="ec-product-lsc" style="margin-top: 10px;">
                                            <div class="ec-product-image">
                                                <a href="@Url.Action("Index", "ProductDetail", new { ProID = items.ProductGUID})">
                                                    <img src="~/Images/Products/@items.Picture" class="img-center" alt="@items.Picture">
                                                </a>
                                                <span class="ec-product-ribbon">New</span>
                                            </div>
                                            <div class="ec-product-body">

                                                <p class="ec-description">
                                                    @catname
                                                    @if (items.UnitsInStock <= 2)
                                                    {

                                                        <span>Low stock</span>
                                                    }
                                                    else
                                                    {
                                                        <span>In stock</span>
                                                    }
                                                </p>

                                                <h3 class="ec-title"><a href="@Url.Action("Index", "ProductDetail", new { ProID = items.ProductGUID})">@items.ProductName</a></h3>
                                                <div class="ec-el-price">
                                                    @if (items.Discount != null)
                                                    {
                                                        var ogprice = items.Price;
                                                        var dcprice = items.Discount;
                                                        var newprice = ogprice - dcprice;
                                                        <p class="ec-d-price" style="margin-left:-60px;"> Rs. @items.Price </p>
                                                        <br />
                                                        <p class="ec-o-price"> Rs. @newprice </p>
                                                    }
                                                    else
                                                    {
                                                        <p class="ec-o-price"> Rs. @items.Price </p>
                                                    }

                                                </div>
                                                @if (lenght12.Count > 1 || lenght13.Count > 1)
                                                {

                                                    <div class="ec-color">
                                                        <div class="ec-pro-color">
                                                            <span class="ec-pro-opt-label">Color</span>
                                                            <ul class="ec-opt-swatch ec-change-img">
                                                                @foreach (var itemsss in pcolor.Where(x => x.Product == items.ProductGUID))
                                                                {
                                                                    foreach (var item in colors.Where(x => x.ColorID == itemsss.AvialableColor))
                                                                    {


                                                                        <li class="active">
                                                                            <a class="ec-opt-clr-img"
                                                                               data-src="~/Images/Products/@items.Picture"
                                                                               data-src-hover="~/Images/Products/@items.Picture"
                                                                               data-tooltip="Gray">
                                                                                <span style="background-color:@item.ColorHash;"></span>
                                                                            </a>
                                                                        </li>

                                                                    }
                                                                }
                                                            </ul>
                                                        </div>

                                                    </div>
                                                    <br>

                                                    <br>
                                                    <div class="ec-size" style="margin-top: -15px;">
                                                        @foreach (var itemsss in psize.Where(x => x.Product == items.ProductGUID))
                                                        {
                                                            foreach (var item in sizes.Where(x => x.SizeID == itemsss.AvialableSize))
                                                            {
                                                                <a style="width:auto; padding-left:5px; padding-right:5px;">@item.DisplayName</a>
                                                            }
                                                        }
                                                    </div>
                                                }


                                                <div class="ec-link-btn" style="margin-top:10px;">

                                                    @if (lenght12.Count > 1 || lenght13.Count > 1)
                                                    {

                                                        <a class=" ec-add-to-cart" href="@Url.Action("Index", "ProductDetail", new { ProID = items.ProductGUID})">Select Options</a>
                                                    }
                                                    else
                                                    {

                                                        <a class=" ec-add-to-cart" href="@Url.Action("Index", "ProductDetail", new { ProID = items.ProductGUID})">View Product</a>
                                                    }

                                                    <div class="ec-link-icon">

                                                        <a href="#" data-tip="Add to Wishlist">
                                                            <img src="~/Theme/assets/images/icons/wishlist.svg"
                                                                 class="svg_img header_svg pro_svg" alt="wishlist" />
                                                        </a>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                }
                                <!-- Custom tile Ends -->




                            </div>
                        </div>
                        <!-- Ec Pagination Start -->
                        <div class="ec-pro-pagination">
                            <span>Showing 1-12 of 21 item(s)</span>
                            <ul class="ec-pro-pagination-inner">
                                <li><a class="active" href="~/Theme/#">1</a></li>
                                <li><a href="~/Theme/#">2</a></li>
                                <li><a href="~/Theme/#">3</a></li>
                                <li><a href="~/Theme/#">4</a></li>
                                <li><a href="~/Theme/#">5</a></li>
                                <li><a class="next" href="~/Theme/#">Next <i class="ecicon eci-angle-right"></i></a></li>
                            </ul>
                        </div>
                        <!-- Ec Pagination End -->
                    </div>
                    <!--Shop content End -->
                </div>
                <!-- Sidebar Area Start -->
                <div class="ec-shop-leftside col-lg-3 col-md-12 order-lg-first order-md-last">
                    <div id="shop_sidebar">
                        <div class="ec-sidebar-heading">
                            <h1>Filter Products Coming Soon!</h1>
                        </div>
                        @*<div class="ec-sidebar-wrap">

                                <div class="ec-sidebar-block">
                                    <div class="ec-sb-title">
                                        <h3 class="ec-sidebar-title">Category</h3>
                                    </div>
                                    <div class="ec-sb-block-content">
                                        <ul>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" checked /> <a href="~/Theme/#">clothes</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" /> <a href="~/Theme/#">Bags</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" /> <a href="~/Theme/#">Shoes</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" /> <a href="~/Theme/#">cosmetics</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" /> <a href="~/Theme/#">electrics</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" /> <a href="~/Theme/#">phone</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li id="ec-more-toggle-content" style="padding: 0; display: none;">
                                                <ul>
                                                    <li>
                                                        <div class="ec-sidebar-block-item">
                                                            <input type="checkbox" /> <a href="~/Theme/#">Watch</a><span class="checked"></span>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="ec-sidebar-block-item">
                                                            <input type="checkbox" /> <a href="~/Theme/#">Cap</a><span class="checked"></span>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item ec-more-toggle">
                                                    <span class="checked"></span><span id="ec-more-toggle">
                                                        More
                                                        Categories
                                                    </span>
                                                </div>
                                            </li>

                                        </ul>
                                    </div>
                                </div>


                                <div class="ec-sidebar-block">
                                    <div class="ec-sb-title">
                                        <h3 class="ec-sidebar-title">Size</h3>
                                    </div>
                                    <div class="ec-sb-block-content">
                                        <ul>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" value="" checked /><a href="~/Theme/#">S</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" value="" /><a href="~/Theme/#">M</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" value="" /> <a href="~/Theme/#">L</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" value="" /><a href="~/Theme/#">XL</a><span class="checked"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <input type="checkbox" value="" /><a href="~/Theme/#">XXL</a><span class="checked"></span>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>


                                <div class="ec-sidebar-block ec-sidebar-block-clr">
                                    <div class="ec-sb-title">
                                        <h3 class="ec-sidebar-title">Color</h3>
                                    </div>
                                    <div class="ec-sb-block-content">
                                        <ul>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#c4d6f9;"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#ff748b;"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#000000;"></span>
                                                </div>
                                            </li>
                                            <li class="active">
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#2bff4a;"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#ff7c5e;"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#f155ff;"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#ffef00;"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#c89fff;"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#7bfffa;"></span>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="ec-sidebar-block-item">
                                                    <span style="background-color:#56ffc1;"></span>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>


                                <div class="ec-sidebar-block">
                                    <div class="ec-sb-title">
                                        <h3 class="ec-sidebar-title">Price</h3>
                                    </div>
                                    <div class="ec-sb-block-content es-price-slider">
                                        <div class="ec-price-filter">

                                            <div id="ec-sliderPrice" class="filter__slider-price" data-min="0"
                                                 data-max="250" data-step="10"></div>
                                            <div class="ec-price-input">
                                                <label class="filter__label">
                                                    <input type="text"
                                                           class="filter__input">
                                                </label>
                                                <span class="ec-price-divider"></span>
                                                <label class="filter__label">
                                                    <input type="text"
                                                           class="filter__input">
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>*@
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End Shop page -->


    @Html.Partial("_footernavigation")

    <!-- Recent Purchase Popup  -->
    @Html.Partial("_floatingtools")


    <!-- Vendor JS -->
    <script src="~/Theme/assets/js/vendor/jquery-3.5.1.min.js"></script>
    <script src="~/Theme/assets/js/vendor/popper.min.js"></script>
    <script src="~/Theme/assets/js/vendor/bootstrap.min.js"></script>
    <script src="~/Theme/assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="~/Theme/assets/js/vendor/modernizr-3.11.2.min.js"></script>

    <!--Plugins JS-->
    <script src="~/Theme/assets/js/plugins/swiper-bundle.min.js"></script>
    <script src="~/Theme/assets/js/plugins/nouislider.js"></script>
    <script src="~/Theme/assets/js/plugins/countdownTimer.min.js"></script>
    <script src="~/Theme/assets/js/plugins/scrollup.js"></script>
    <script src="~/Theme/assets/js/plugins/jquery.zoom.min.js"></script>
    <script src="~/Theme/assets/js/plugins/slick.min.js"></script>
    <script src="~/Theme/assets/js/plugins/infiniteslidev2.js"></script>
    <script src="~/Theme/assets/js/vendor/jquery.magnific-popup.min.js"></script>
    <script src="~/Theme/assets/js/plugins/jquery.sticky-sidebar.js"></script>
    <!-- Google translate Js -->
    <script src="~/Theme/assets/js/vendor/google-translate.js"></script>
    <script>
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({ pageLanguage: 'en' }, 'google_translate_element');
        }
    </script>
    <!-- Main Js -->
    <script src="~/Theme/assets/js/main.js"></script>
    <script>
        $(document).ready(function () {
            GetCartData();
        });
    </script>

</body>
</html>
